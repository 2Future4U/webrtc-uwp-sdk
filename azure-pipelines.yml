# Universal Windows Platform
# Build a Universal Windows Platform project using Visual Studio.
# Add steps that test and distribute an app, save build artifacts, and more:
# https://aka.ms/yaml

#trigger:
#- Sergej/20190206-DevOps

variables:
  target: webrtc
  platform: winuwp

jobs:
- job: Build
  pool:
    vmImage: 'VS2017-Win2016'
  strategy:
    maxParallel: 4
    matrix:
      x64:
        cpu: 'x64'
        configuration: release
      x86:
        cpu: 'x86'
        configuration: release
      x64d:
        cpu: 'x64'
        configuration: debug
      x86d:
        cpu: 'x86'
        configuration: debug
  steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: '2.7'
      architecture: 'x64'
  - script: python $(Build.SourcesDirectory)\scripts\run.py -a prepare -t $(target) -x $(cpu) -p $(platform) -c $(configuration)
  - script: python $(Build.SourcesDirectory)\scripts\run.py -a build -t $(target) -x $(cpu) -p $(platform) -c $(configuration)
    


